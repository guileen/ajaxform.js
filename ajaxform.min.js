/**
 * @license GPL licenses.
 * @author Jason Green [guileen AT gmail.com]
 * Migrate from jquery Form Plugin : http://malsup.com/jquery/form/
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html.
 *
 *
 */(function(a){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")},String.prototype.trimLeft=function(){return this.replace(/^\s+/,"")},String.prototype.trimRight=function(){return this.replace(/\s+$/,"")};var b=/[\n\t]/g,c=/\s+/,d=/\r/g,e=/href|src|style/,f=/(button|input)/i,g=/(button|input|object|select|textarea)/i,h=/^(a|area)$/i,i=/radio|checkbox/,j=function(a,b){var d=(b||"").split(c);if(a.nodeType===1)if(!a.className)a.className=b;else{var e=" "+a.className+" ",f=a.className;for(var g=0,h=d.length;g<h;g++)e.indexOf(" "+d[g]+" ")<0&&(f+=" "+d[g]);a.className=f.trim()}},k=function(a,d){var e=(d||"").split(c);if(a.nodeType===1&&a.className)if(d){var f=(" "+a.className+" ").replace(b," ");for(var g=0,h=e.length;g<h;g++)f=f.replace(" "+e[g]+" "," ");a.className=f.trim()}else a.className=""},l=function(a,b){m(a,b)?k(a,b):j(a,b)},m=function(a,c){var d=" "+c+" ";return(" "+a.className+" ").replace(b," ").indexOf(d)>-1},n=function(a,b){callback_called=!1;var c=navigator.userAgent.toLowerCase();a+=a.indexOf("?")>=0?"&":"?"+s(b);var d=document.getElementById(a);if(d)d.setAttribute("src",a);else{d=document.createElement("script"),d.id=a,d.src=a,d.type="text/javascript",d.className="temp_script";var e=document.getElementsByTagName("body")[0];e.appendChild(d)}},o=function(a){var b=a.name,c=a.type,d=a.tagName.toLowerCase();if(!b||a.disabled||c=="reset"||c=="button"||(c=="checkbox"||c=="radio")&&!a.checked||(c=="submit"||c=="image")&&a.form&&a.form.clk!=a||d=="select"&&a.selectedIndex==-1)return null;if(d=="select"){var e=a.selectedIndex;if(e<0)return null;var f=[],g=a.options,h=c=="select-one",i=h?e+1:g.length;for(var j=h?e:0;j<i;j++){var k=g[j];if(k.selected){var l=k.value;l||(l=k.attributes&&k.attributes.value&&!k.attributes.value.specified?k.text:k.value);if(h)return l;f.push(l)}}return f}return a.value},p=function(a,b,c){a&&a.constructor==Array?a.push({name:b,value:c}):(old=a[b],old?(old.constructor!=Array&&(a[b]=[old]),a[b].push(c)):a[b]=c)},q=function(a,b){var c=b||[],d=a.elements;if(!d)return c;var e,f,g,h,i,j,k;for(e=0,j=d.length;e<j;e++){i=d[e],g=i.name;if(!g)continue;h=o(i);if(h&&h.constructor==Array)for(f=0,k=h.length;f<k;f++)p(c,g,h[f]);else h!==null&&typeof h!="undefined"&&p(c,g,h)}return c},r=function(a,b){var c=q(a,{});if(b){var d={};d[b]=c;return d}return c},s=function(a){var b=[],c=a.constructor==Array;if(c)for(var d=0;d<a.length;d++){var e=a[d],f=e.name;e=e.value,b[b.length]=encodeURIComponent(f)+"="+encodeURIComponent(e)}else for(var f in a){var e=a[f];if(e&&e.constructor==Array)for(var d in e)b[b.length]=encodeURIComponent(f)+"="+encodeURIComponent(e[d]);else b[b.length]=encodeURIComponent(f)+"="+encodeURIComponent(e)}return b.join("&").replace(" ","+")},t=function(a){return s(q(a))},u=function(b,c,d,e,f,g){var d=d?d.toUpperCase():"GET",h=e?s(e):null,f=f||null;h&&(d=="GET"||f?b+=b.indexOf("?")>=0?"&":"?"+h:f=h);var i=a.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");i.onreadystatechange=function(){i.readyState==4&&c(i)},i.open(d,b,!0);for(var j in g)v=g[j],typeof v=="string"&&i.setRequestHeader(j,v);f&&g==null&&i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send(f)},w=function(a,b,c){u(a.action,b,a.method,q(a),c||{"Content-Type":"application/x-www-form-urlencoded"})},x=function(a,b){a.onsubmit=function(c){w(a,b);return!1}},y="application/json",z=function(a,b,c,d,e,f,g){f=f||{},g=g||y,f.Accept=f.Accept||g,f["Content-Type"]=f["Content-Type"]||g,u(a,b,c,d,e,f)},A=function(a,b,c,d){var e=r(a,a.name);z(a.action,function(a){b(a,e)},a.method,null,JSON.stringify(e),c,d)},B=function(a,b,c,d){a.onsubmit=function(e){A(a,b,c,d);return!1}};a.formToArray=q,a.formToObject=r,a.formSerialize=t,a.ajax=u,a.ajaxSubmit=w,a.ajaxForm=x,a.rest=z,a.restSubmit=A,a.restForm=B})(window)